<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Glosario AWS - Cloud Practitioner</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body class="light-mode">

  <header class="aws-header">
    <h1>Glosario de Servicios AWS ‚òÅÔ∏è</h1>
    <p>Material de estudio para la certificaci√≥n Cloud Practitioner</p>
  </header>

  <main class="container my-4">

    <!-- Barra superior -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <input type="text" id="searchInput" class="form-control w-75" placeholder="üîç Buscar servicio AWS...">
      <button id="toggleMode" class="btn btn-dark ms-3">üåô Modo oscuro</button>
    </div>

    <!-- Contenedor del glosario -->
    <div id="awsGlossary">
      <!-- Aqu√≠ se cargan las categor√≠as y servicios desde JSON -->
    </div>

  </main>

  <footer class="text-center text-muted py-3">
    <small>Hecho con ‚òÅÔ∏è y ‚òï por Cristian ‚Äî Estudio AWS Cloud Practitioner</small>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const glossaryContainer = document.getElementById('awsGlossary');
    const searchInput = document.getElementById('searchInput');
    const toggleModeBtn = document.getElementById('toggleMode');
    const body = document.body;
    let allData = [];

    // üåô Alternar modo oscuro
    toggleModeBtn.addEventListener('click', () => {
      body.classList.toggle('dark-mode');
      toggleModeBtn.textContent = body.classList.contains('dark-mode') ? '‚òÄÔ∏è Modo claro' : 'üåô Modo oscuro';
    });

    // üìñ Cargar datos desde JSON
    fetch('servicios.json')
      .then(response => response.json())
      .then(data => {
        allData = data.categories;
        renderCategories(allData);
      })
      .catch(error => {
        glossaryContainer.innerHTML = '<p class="text-danger">Error cargando servicios.json</p>';
        console.error(error);
      });

    // üß© Renderizar categor√≠as y servicios
    function renderCategories(categories) {
      glossaryContainer.innerHTML = '';

      categories.forEach((category, catIndex) => {
        const categoryBlock = document.createElement('div');

        // T√≠tulo de la categor√≠a
        const title = document.createElement('h3');
        title.classList.add('category-title');
        title.textContent = category.name;
        categoryBlock.appendChild(title);

        // Contenedor de servicios (accordion)
        const accordion = document.createElement('div');
        accordion.classList.add('accordion');
        accordion.id = `accordion${catIndex}`;

        category.services.forEach((service, index) => {
          const id = `cat${catIndex}serv${index}`;
          const card = document.createElement('div');
          card.classList.add('accordion-item', 'aws-card');
          card.innerHTML = `
            <h2 class="accordion-header" id="heading${id}">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse${id}" aria-expanded="false" aria-controls="collapse${id}">
                ${service.name}
              </button>
            </h2>
            <div id="collapse${id}" class="accordion-collapse collapse" aria-labelledby="heading${id}" data-bs-parent="#accordion${catIndex}">
              <div class="accordion-body">
                <p>${service.description}</p>
                ${service.image ? `<img src="${service.image}" alt="${service.name}" class="aws-img">` : ''}
              </div>
            </div>
          `;
          accordion.appendChild(card);
        });

        categoryBlock.appendChild(accordion);
        glossaryContainer.appendChild(categoryBlock);
      });
    }

    // üîç B√∫squeda de servicios
    searchInput.addEventListener('input', (e) => {
      const term = e.target.value.toLowerCase();
      if (!term) {
        renderCategories(allData);
        return;
      }

      const filteredCategories = allData
        .map(cat => ({
          ...cat,
          services: cat.services.filter(s => s.name.toLowerCase().includes(term))
        }))
        .filter(cat => cat.services.length > 0);

      renderCategories(filteredCategories);
    });
  </script>
</body>
</html>
